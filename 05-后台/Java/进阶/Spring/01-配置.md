[TOC]

# 配置

> **全局配置文件**

在src/main/resources目录下，Spring Boot提供了一个名为application.properties的全局配置文件，可对一些默认配置的配置值进行修改。

```
#application.properties文件配置信息
mrbird.blog.name=mrbird's blog
mrbird.blog.title=Spring Boot
#属性引用
mrbird.blog.wholeTitle=${mrbird.blog.name}--${mrbird.blog.title}
```

定义一个BlogProperties Bean，通过*`@Value("${属性名}")`*来加载配置文件中的属性值

```java
@Component
public class BlogProperties {

    @Value("${mrbird.blog.name}")
    private String name;

    @Value("${mrbird.blog.title}")
    private String title;
    // get,set略
}
```

在属性非常多的情况下，也可以定义一个和配置文件对应的Bean：

```java
@ConfigurationProperties(prefix="mrbird.blog")
public class ConfigBean {
    private String name;
    private String title;
    // get,set略
}
```

**通过注解\*`@ConfigurationProperties(prefix="mrbird.blog")`\*指明了属性的通用前缀，通用前缀加属性名和配置文件的属性名一一对应。**

**除此之外还需在Spring Boot入口类加上注解\*`@EnableConfigurationProperties({ConfigBean.class})`\*来启用该配置**

```java
@SpringBootApplication
//启用上面的配置类
@EnableConfigurationProperties({ConfigBean.class})
public class Application {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
				/*
				SpringApplication app = new SpringApplication(Application.class);
				项目的配置被命令行不会被修改
		    app.setAddCommandLineProperties(false);
		    app.run(args);*/
    }
}
```

除了可以在application.properties里配置属性，我们还可以自定义一个配置文件。在src/main/resources目录下新建一个test.properties

定义一个对应该配置文件的Bean：

```java
@Configuration
@ConfigurationProperties(prefix="test")
@PropertySource("classpath:test.properties")
@Component
public class TestConfigBean {
    private String name;
    private int age;
    // get,set略
}
```

注解*`@PropertySource("classpath:test.properties")`*指明了使用哪个配置文件。要使用该配置Bean，同样也需要在入口类里使用注解*`@EnableConfigurationProperties({TestConfigBean.class})`* 来启用该配置。

## 切换不同环境的配置文件

```java
#在application.properties文件中加载application-dev.properties配置文件内容
*spring.profiles.active=dev*
```

> XML配置

虽然Spring Boot并不推荐我们继续使用xml配置，但如果出现不得不使用xml配置的情况，Spring Boot允许我们在入口类里通过注解*`@ImportResource({"classpath:some-application.xml"})`* 来**引入xml配置文件**